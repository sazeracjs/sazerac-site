
<!DOCTYPE html>
<html lang="en">
    <head><meta name="generator" content="Hexo 3.8.0">
        <title>Guide — Sazerac</title>
        <meta charset="utf-8">
        <meta name="description" content="Data-driven testing for Jasmine, Mocha, and Jest">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

        <meta property="og:type" content="article">
        <meta property="og:title" content="Guide — Sazerac">
        <meta property="og:description" content="Data-driven testing for Jasmine, Mocha, and Jest">
        <meta property="og:image" content="https://sazeracjs.com/images/logo.png">

        <meta name="twitter:card" content="summary">
        <meta name="twitter:title" content="Guide — Sazerac">
        <meta name="twitter:description" content="Data-driven testing for Jasmine, Mocha, and Jest">
        <meta name="twitter:image" content="https://sazeracjs.com/images/logo.png">

        <link rel="shortcut icon" href="/images/logo.ico" type="image/x-icon">

        <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Roboto Mono" rel="stylesheet" type="text/css">
        <link href="//fonts.googleapis.com/css?family=Dosis:500&text=Sazerac" rel="stylesheet" type="text/css">

        <!-- main page styles -->
        <link rel="stylesheet" href="/css/page.css">
        
        <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">

        <script>window.PAGE_TYPE = "v0.2.2"</script>

        <!-- ga -->
        <script>

            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            /**
            * Function that tracks a click on an outbound link in Analytics.
            * This function takes a valid URL string as an argument, and uses that URL string
            * as the event label. Setting the transport method to 'beacon' lets the hit be sent
            * using 'navigator.sendBeacon' in browser that support it.
            */
            var trackOutboundLink = function(url) {
                ga('send', 'event', 'outbound', 'click', url, {
                    'transport': 'beacon',
                    'hitCallback': function(){document.location = url;}
                });
            }

            ga('create', 'UA-92756909-1', 'auto');
            ga('send', 'pageview');
        </script>
    </head>

    <body class="docs">
        <div id="mobile-bar">
            <a class="menu-button"></a>
            
<div class="title">
  <a href="/" class="header-link">
    <img id="logo" src="/images/logo.svg">
    <span id="project_name">Sazerac</span>
  </a>
  
    <div class="version-dropdown">
  
  
    <div class="nav-dropdown-container">
      <a class="nav-link"><span id="version">v0.2.2</span></a><span class="arrow"></span>
      <ul class="nav-dropdown">
        <li>
          <ul>
            
              <li><a href="/v0.2.2/">v0.2.2</a></li>
            
              <li><a href="/v0.3.0/">v0.3.0</a></li>
            
              <li><a href="/v0.4.1/">v0.4.1</a></li>
            
          </ul>
        </li>
      </ul>
    </div>
  
</div>
  
</div>
        </div>
        <div id="header">
  
<div class="title">
  <a href="/" class="header-link">
    <img id="logo" src="/images/logo.svg">
    <span id="project_name">Sazerac</span>
  </a>
  
    <div class="version-dropdown">
  
  
    <div class="nav-dropdown-container">
      <a class="nav-link"><span id="version">v0.2.2</span></a><span class="arrow"></span>
      <ul class="nav-dropdown">
        <li>
          <ul>
            
              <li><a href="/v0.2.2/">v0.2.2</a></li>
            
              <li><a href="/v0.3.0/">v0.3.0</a></li>
            
              <li><a href="/v0.4.1/">v0.4.1</a></li>
            
          </ul>
        </li>
      </ul>
    </div>
  
</div>
  
</div>
  <div id="header-right">
    <ul id="links" class="links-list">
    
    <li>
        <a onclick="trackOutboundLink('https://github.com/mikec/sazerac'); return false;" href="https://github.com/mikec/sazerac">
        
            <i class="fa fa-github fa-lg"></i>
        
        
            <span>mikec/sazerac</span>
        
        </a>
    </li>
    
</ul>
    <ul id="share-links" class="links-list">
    <li class="share-text">Share:</li>
    <li>
    <a href="https://twitter.com/intent/tweet?text=Sazerac%20-%20Data-driven%20testing%20for%20Jasmine%2C%20Mocha%2C%20and%20Jest&url=http://sazeracjs.com">
        <i class="fa fa-twitter fa-lg"></i>
    </a>
    </li>
    <li>
    <a href="https://www.facebook.com/sharer/sharer.php?s=100&p[url]=http%3A%2F%2Fsazeracjs.com">
        <i class="fa fa-facebook fa-lg"></i>
    </a>
    </li>
    <li>
    <a href="https://plus.google.com/share?url=http%3A%2F%2Fsazeracjs.com">
        <i class="fa fa-google-plus fa-lg"></i>
    </a>
    </li>
</ul>
  </div>
</div>


        
            <div id="main" class="fix-sidebar">
                <div class="sidebar">
    <div class="list">
        <ul class="menu-root">
            
                
                <li>
                    <a href="/v0.2.2/index.html" class="sidebar-link current">Guide</a>
                </li>
            
                
                <li>
                    <a href="/v0.2.2/api.html" class="sidebar-link">API</a>
                </li>
            
                
                <li>
                    <a href="/v0.2.2/examples.html" class="sidebar-link">Examples</a>
                </li>
            
        </ul>
    </div>
    <ul id="links" class="links-list">
    
    <li>
        <a onclick="trackOutboundLink('https://github.com/mikec/sazerac'); return false;" href="https://github.com/mikec/sazerac">
        
            <i class="fa fa-github fa-lg"></i>
        
        
            <span>mikec/sazerac</span>
        
        </a>
    </li>
    
</ul>
    <ul id="share-links" class="links-list">
    <li class="share-text">Share:</li>
    <li>
    <a href="https://twitter.com/intent/tweet?text=Sazerac%20-%20Data-driven%20testing%20for%20Jasmine%2C%20Mocha%2C%20and%20Jest&url=http://sazeracjs.com">
        <i class="fa fa-twitter fa-lg"></i>
    </a>
    </li>
    <li>
    <a href="https://www.facebook.com/sharer/sharer.php?s=100&p[url]=http%3A%2F%2Fsazeracjs.com">
        <i class="fa fa-facebook fa-lg"></i>
    </a>
    </li>
    <li>
    <a href="https://plus.google.com/share?url=http%3A%2F%2Fsazeracjs.com">
        <i class="fa fa-google-plus fa-lg"></i>
    </a>
    </li>
</ul>
</div>

<div class="content with-sidebar">
    
      <h1>Guide</h1>
    
    <h2 id="What-is-Sazerac"><a href="#What-is-Sazerac" class="headerlink" title="What is Sazerac?"></a>What is Sazerac?</h2><p>Sazerac is a library for <a href="https://hackernoon.com/sazerac-data-driven-testing-for-javascript-e3408ac29d8c#.xppc8jjvo" target="_blank" rel="noopener">data-driven testing</a> in JavaScript. It works with <a href="https://mochajs.org/" target="_blank" rel="noopener">mocha</a>, <a href="https://jasmine.github.io/" target="_blank" rel="noopener">jasmine</a>, and <a href="https://facebook.github.io/jest/" target="_blank" rel="noopener">jest</a>. Using Sazerac, and the data-driven testing pattern in general, will reduce the complexity and increase readability of your test code.</p>
<h2 id="Why-Use-It"><a href="#Why-Use-It" class="headerlink" title="Why Use It?"></a>Why Use It?</h2><p>Let’s say you have a function <code>isPrime()</code>. When given a number, it returns <code>true</code> or <code>false</code> depending on whether the number is a prime number.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPrime</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">2</span>; i &lt; num; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span>(num % i === <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> num &gt; <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>If you’re using a framework like <a href="https://jasmine.github.io/" target="_blank" rel="noopener">jasmine</a>, your tests might look something like this:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">describe(<span class="string">'isPrime()'</span>, () =&gt; &#123;</span><br><span class="line"></span><br><span class="line">  describe(<span class="string">'when given 2'</span>, () =&gt; &#123;</span><br><span class="line">    it(<span class="string">'should return true'</span>, () =&gt; &#123;</span><br><span class="line">      assert.isTrue(isPrime(<span class="number">2</span>))</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  describe(<span class="string">'when given 3'</span>, () =&gt; &#123;</span><br><span class="line">    it(<span class="string">'should return true'</span>, () =&gt; &#123;</span><br><span class="line">      assert.isTrue(isPrime(<span class="number">3</span>))</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  describe(<span class="string">'when given 4'</span>, () =&gt; &#123;</span><br><span class="line">    it(<span class="string">'should return false'</span>, () =&gt; &#123;</span><br><span class="line">      assert.isFalse(isPrime(<span class="number">4</span>))</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// and more ...</span></span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>It’s a lot of code to write for only 3 test cases and such a basic function!</p>
<p>The same tests can be defined with Sazerac as follows:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">test(isPrime, () =&gt; &#123;</span><br><span class="line">  given(<span class="number">2</span>).expect(<span class="literal">true</span>)</span><br><span class="line">  given(<span class="number">3</span>).expect(<span class="literal">true</span>)</span><br><span class="line">  given(<span class="number">4</span>).expect(<span class="literal">false</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Sazerac runs the <code>describe</code> and <code>it</code> functions needed for these test cases. It adds reporting messages in a consistent format based on the input and output parameters. For this example, the test report ends up looking like this:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">isPrime()</span><br><span class="line">  when given 2</span><br><span class="line">    ✓ should return true</span><br><span class="line">  when given 3</span><br><span class="line">    ✓ should return true</span><br><span class="line">  when given 4</span><br><span class="line">    ✓ should return false</span><br></pre></td></tr></table></figure>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p>Install Sazerac as an npm module and save it to your <code>package.json</code> file as a development dependency:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">npm install sazerac --save-dev</span><br></pre></td></tr></table></figure>
<p>Import the <code>test</code> and <code>given</code> helper functions into your project:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; test, given &#125; <span class="keyword">from</span> <span class="string">'sazerac'</span></span><br></pre></td></tr></table></figure>
<h2 id="Basic-Use"><a href="#Basic-Use" class="headerlink" title="Basic Use"></a>Basic Use</h2><p>Sazerac’s <code>test()</code> and <code>given()</code> functions are the basic building blocks for creating data-driven test cases.</p>
<p><code>test()</code> sets the function you want to test.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">test(mySumFunction, () =&gt; &#123;</span><br><span class="line">  <span class="comment">// test cases for mySumFunction defined here...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>given()</code> creates a test case by defining the arguments that will be passed to your function.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">test(mySumFunction, () =&gt; &#123;</span><br><span class="line">  <span class="keyword">var</span> t = given(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>The object returned by <code>given()</code> provides functions for defining your test case. <code>expect()</code> is the most basic of these. It defines the expected value for you test case. </p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">test(mySumFunction, () =&gt; &#123;</span><br><span class="line">  <span class="comment">// when mySumFunction is given the arguments 1, 2, and 3</span></span><br><span class="line">  <span class="keyword">var</span> t = given(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">  <span class="comment">// we expect it to return 6</span></span><br><span class="line">  t.expect(<span class="number">6</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="Custom-Assertions"><a href="#Custom-Assertions" class="headerlink" title="Custom Assertions"></a>Custom Assertions</h2><p>Sometimes the expected return value for your test case is too complex to define with <code>expect()</code>. To define a custom assertion, <code>assert()</code> can be used instead. The <code>assert()</code> function expects a message describing the assertion, and a function that defines the assertion.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">t.assert(</span><br><span class="line">  <span class="string">'should set the value of the sum property to 6'</span>,</span><br><span class="line">  (actualReturnValue) =&gt; &#123;</span><br><span class="line">    <span class="comment">// do anything with actualReturnValue here,</span></span><br><span class="line">    <span class="comment">// for example:</span></span><br><span class="line">    assert.equal(actualReturnValue.sum, <span class="number">6</span>)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>Since you have the actual return value of your test case, any assertion can be performed on the return value. For example, you could add assertions with the library of your choice, such as <a href="http://chaijs.com/" target="_blank" rel="noopener">chai.js</a> or  <a href="https://shouldjs.github.io/" target="_blank" rel="noopener">should.js</a></p>
<p>You can also add multiple assertions for a single test case</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">t.assert(</span><br><span class="line">  <span class="string">'should set a sum property'</span>,</span><br><span class="line">  (actualReturnValue) =&gt; &#123;</span><br><span class="line">    assert.hasProperty(actualReturnValue, <span class="string">'sum'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line">t.assert(</span><br><span class="line">  <span class="string">'should set the value of the sum property to 6'</span>,</span><br><span class="line">  (actualReturnValue) =&gt; &#123;</span><br><span class="line">    assert.equal(actualReturnValue.sum, <span class="number">6</span>)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>Each assertion will be executed as a separate test.</p>
<h2 id="Reporting-Messages"><a href="#Reporting-Messages" class="headerlink" title="Reporting Messages"></a>Reporting Messages</h2><p>Sazerac generates messages that are passed to <code>describe()</code> and <code>it()</code> functions, and ultimately end up in your test report. You can customize these, or stick with the default format.</p>
<h3 id="Default-Format"><a href="#Default-Format" class="headerlink" title="Default Format"></a>Default Format</h3><p>Messages for each test case are defined based on the given parameters and the expected return value.</p>
<p>The <code>describe</code> message for a group of test cases is defined based on the name of the function being tested.</p>
<figure class="highlight console"><table><tr><td class="code"><pre><span class="line">&#123;name_of_tested_function&#125;</span><br><span class="line">  when given &#123;parameters&#125;</span><br><span class="line">    ✓ should return &#123;expected_return_value&#125;</span><br></pre></td></tr></table></figure>
<p>Here’s an example:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">test(mySumFunction, () =&gt; &#123;</span><br><span class="line">  given(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>).expect(<span class="number">6</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>will output:</p>
<figure class="highlight console"><table><tr><td class="code"><pre><span class="line">mySumFunction()</span><br><span class="line">  when given 1, 2, and 3</span><br><span class="line">    ✓ should return 6</span><br></pre></td></tr></table></figure>
<h3 id="Setting-Describe-Messages"><a href="#Setting-Describe-Messages" class="headerlink" title="Setting Describe Messages"></a>Setting Describe Messages</h3><p>You can set a message describing the test case using the <code>describe()</code> function</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">test(mySumFunction, () =&gt; &#123;</span><br><span class="line">  given(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">    .describe(<span class="string">'1 + 2 + 3'</span>)</span><br><span class="line">    .expect(<span class="number">6</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>will output:</p>
<figure class="highlight console"><table><tr><td class="code"><pre><span class="line">mySumFunction()</span><br><span class="line">  1 + 2 + 3</span><br><span class="line">    ✓ should return 6</span><br></pre></td></tr></table></figure>
<h3 id="Setting-Should-Messages"><a href="#Setting-Should-Messages" class="headerlink" title="Setting Should Messages"></a>Setting Should Messages</h3><p>You can set a message describing the test assertion using the <code>should()</code> function</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">test(mySumFunction, () =&gt; &#123;</span><br><span class="line">  given(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">    .describe(<span class="string">'1 + 2 + 3'</span>)</span><br><span class="line">    .should(<span class="string">'= 6'</span>)</span><br><span class="line">    .expect(<span class="number">6</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>will output:</p>
<figure class="highlight console"><table><tr><td class="code"><pre><span class="line">mySumFunction()</span><br><span class="line">  1 + 2 + 3</span><br><span class="line">    ✓ = 6</span><br></pre></td></tr></table></figure>
<h3 id="Formatting-With-sprintf-js"><a href="#Formatting-With-sprintf-js" class="headerlink" title="Formatting With sprintf.js"></a>Formatting With sprintf.js</h3><p>Sazerac uses <a href="https://github.com/alexei/sprintf.js" target="_blank" rel="noopener">sprintf.js</a> to provide given and expected values for custom string formatting.</p>
<p>You can use any sprintf.js functionality to format your message strings. For example:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">test(addTwoNumbers, () =&gt; &#123;</span><br><span class="line">  given(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">    .expect(<span class="number">5</span>)</span><br><span class="line">    .describe(<span class="string">'%s + %s'</span>)</span><br><span class="line">    .should(<span class="string">'= %s'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>will output:</p>
<figure class="highlight console"><table><tr><td class="code"><pre><span class="line">addTwoNumbers()</span><br><span class="line">  2 + 3</span><br><span class="line">    ✓ = 5</span><br></pre></td></tr></table></figure>
<h2 id="Grouping-Multiple-Cases"><a href="#Grouping-Multiple-Cases" class="headerlink" title="Grouping Multiple Cases"></a>Grouping Multiple Cases</h2><p>If you have multiple test case inputs with the same expected return value, they can be grouped with the <code>forCases(cases)</code> function:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; test, given, forCases &#125; <span class="keyword">from</span> <span class="string">'sazerac'</span></span><br><span class="line"></span><br><span class="line">test(isPrime, () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> primes = [ given(<span class="number">2</span>), given(<span class="number">3</span>), given(<span class="number">5</span>), given(<span class="number">7</span>) ];</span><br><span class="line">  <span class="keyword">const</span> nonPrimes = [ given(<span class="number">1</span>), given(<span class="number">4</span>), given(<span class="number">6</span>), given(<span class="number">8</span>) ];</span><br><span class="line">  forCases(primes).expect(<span class="literal">true</span>)</span><br><span class="line">  forCases(nonPrimes).expect(<span class="literal">false</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><code>forCases()</code> will execute a separate test for each case that you pass it. It accepts either an array or a series of arguments, depending on which style you prefer.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">test(isPrime, () =&gt; &#123;</span><br><span class="line">  <span class="comment">// pass it an array of test cases</span></span><br><span class="line">  <span class="keyword">const</span> arr = [ given(<span class="number">2</span>), given(<span class="number">3</span>), given(<span class="number">5</span>), given(<span class="number">7</span>) ];</span><br><span class="line">  forCases(arr).expect(<span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// or each test case as a separate argument</span></span><br><span class="line">  forCases(</span><br><span class="line">    given(<span class="number">1</span>),</span><br><span class="line">    given(<span class="number">4</span>),</span><br><span class="line">    given(<span class="number">6</span>),</span><br><span class="line">    given(<span class="number">8</span>)</span><br><span class="line">  ).expect(<span class="literal">false</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="Chaining"><a href="#Chaining" class="headerlink" title="Chaining"></a>Chaining</h2><p>All test case functions can be chained, in any order.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">test(mySumFunction, () =&gt; &#123;</span><br><span class="line">  given(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">    .expect(<span class="number">6</span>)</span><br><span class="line">    .describe(<span class="string">'when called with a set of numbers'</span>)</span><br><span class="line">    .should(<span class="string">'should return the sum of the numbers'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
    
    <div class="footer">
      Caught a mistake or want to contribute to the documentation?
      <a href="https://github.com/mikec/sazerac-site/blob/master/src/v0.2.2/index.md" target="_blank">
        Edit this page on Github!
      </a>
    </div>
</div>

            </div>
        

        <script src="/js/smooth-scroll.min.js"></script>

        <!-- main custom script for sidebars, version selects etc. -->        
        <script src="/js/css.escape.js"></script>
        <script src="/js/common.js"></script>

        <!-- fastclick -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
        <script>
        document.addEventListener('DOMContentLoaded', function() {
          FastClick.attach(document.body)
        }, false)
        </script>
    </body>
</html>
